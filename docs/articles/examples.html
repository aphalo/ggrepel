<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Examples • ggrepel</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Examples">
<meta property="og:description" content="ggrepel">
<meta property="og:image" content="https://ggrepel.slowkow.com/reference/figures/ggrepel-allison_horst.jpg">
<meta property="og:image:alt" content="ggrepel: wonderfully repulsive labels">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@slowkow">
<meta name="twitter:site" content="@slowkow">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-15531613-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-15531613-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggrepel</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/examples.html">Examples</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://twitter.com/slowkow/status/1339364391377092609">Version 0.9.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/related-work.html">Related work</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/slowkow/ggrepel">
    <span class="fa fa-github"></span>
     
    GitHub
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="examples_files/header-attrs-2.3.2/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Examples</h1>
                        <h4 class="author">Kamil Slowikowski</h4>
            
            <h4 class="date">2021-01-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/slowkow/ggrepel/blob/master/vignettes/examples.Rmd"><code>vignettes/examples.Rmd</code></a></small>
      <div class="hidden name"><code>examples.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>ggrepel provides geoms for <a href="https://ggplot2.tidyverse.org/">ggplot2</a> to repel overlapping text labels:</p>
<ul>
<li><code><a href="../reference/geom_text_repel.html">geom_text_repel()</a></code></li>
<li><code><a href="../reference/geom_text_repel.html">geom_label_repel()</a></code></li>
</ul>
<p>Text labels repel away from each other, away from data points, and away from edges of the plotting area (panel).</p>
<p>Let’s compare <code>geom_text()</code> and <code><a href="../reference/geom_text_repel.html">geom_text_repel()</a></code>:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggrepel</span>)
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)

<span class="no">dat</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(<span class="no">mtcars</span>, <span class="no">wt</span> <span class="kw">&gt;</span> <span class="fl">2.75</span> <span class="kw">&amp;</span> <span class="no">wt</span> <span class="kw">&lt;</span> <span class="fl">3.45</span>)
<span class="no">dat</span>$<span class="no">car</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">dat</span>)

<span class="no">p</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">dat</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>)

<span class="no">p1</span> <span class="kw">&lt;-</span> <span class="no">p</span> + <span class="fu">geom_text</span>() + <span class="fu">labs</span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"geom_text()"</span>)

<span class="no">p2</span> <span class="kw">&lt;-</span> <span class="no">p</span> + <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>() + <span class="fu">labs</span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"geom_text_repel()"</span>)

<span class="kw pkg">gridExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span>(<span class="no">p1</span>, <span class="no">p2</span>, <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">2</span>)</pre></body></html></div>
<p><img src="examples_files/figure-html/comparison-1.png" width="700"></p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>ggrepel is available on <a href="https://CRAN.R-project.org/package=ggrepel">CRAN</a>:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"ggrepel"</span>)</pre></body></html></div>
<p>The <a href="https://github.com/slowkow/ggrepel">latest development version</a> may have new features, and you can get it from GitHub:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="co"># Use the devtools package</span>
<span class="co"># install.packages("devtools")</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"slowkow/ggrepel"</span>)</pre></body></html></div>
</div>
<div id="options" class="section level2">
<h2 class="hasAnchor">
<a href="#options" class="anchor"></a>Options</h2>
<p>Options allow us to change the behavior of ggrepel to fit the needs of our figure. Most of them are global options that affect all of the text labels, but some can be vectors of the same length as your data, like <code>nudge_x</code> or <code>nudge_y</code>.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="16%">
<col width="64%">
</colgroup>
<thead><tr class="header">
<th>Option</th>
<th>Default</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>seed</code></td>
<td><code>NA</code></td>
<td>random seed for recreating the exact same layout</td>
</tr>
<tr class="even">
<td><code>force</code></td>
<td><code>1</code></td>
<td>force of repulsion between overlapping text labels</td>
</tr>
<tr class="odd">
<td><code>force_pull</code></td>
<td><code>1</code></td>
<td>force of attraction between each text label and its data point</td>
</tr>
<tr class="even">
<td><code>direction</code></td>
<td><code>"both"</code></td>
<td>move text labels “both” (default), “x”, or “y” directions</td>
</tr>
<tr class="odd">
<td><code>max.time</code></td>
<td><code>0.5</code></td>
<td>maximum number of seconds to try to resolve overlaps</td>
</tr>
<tr class="even">
<td><code>max.iter</code></td>
<td><code>10000</code></td>
<td>maximum number of iterations to try to resolve overlaps</td>
</tr>
<tr class="odd">
<td><code>nudge_x</code></td>
<td><code>0</code></td>
<td>adjust the starting x position of the text label</td>
</tr>
<tr class="even">
<td><code>nudge_y</code></td>
<td><code>0</code></td>
<td>adjust the starting y position of the text label</td>
</tr>
<tr class="odd">
<td><code>box.padding</code></td>
<td><code>0.25 lines</code></td>
<td>padding around the text label</td>
</tr>
<tr class="even">
<td><code>point.padding</code></td>
<td><code>0 lines</code></td>
<td>padding around the labeled data point</td>
</tr>
<tr class="odd">
<td><code>arrow</code></td>
<td><code>NULL</code></td>
<td>render line segment as an arrow with <code><a href="https://rdrr.io/r/grid/arrow.html">grid::arrow()</a></code>
</td>
</tr>
</tbody>
</table>
</div>
<div id="aesthetics" class="section level2">
<h2 class="hasAnchor">
<a href="#aesthetics" class="anchor"></a>Aesthetics</h2>
<p>Aesthetics are parameters that can be mapped to your data with <code><a href="../reference/geom_text_repel.html">geom_text_repel(mapping = aes(...))</a></code>.</p>
<p>ggrepel provides the same aesthetics for <code>geom_text_repel</code> and <code>geom_label_repel</code> that are available in <a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text()</a> or <a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_label()</a>, but it also provides a few more that are unique to ggrepel.</p>
<p>All of them are listed below. See the <a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html">ggplot2 documentation about aesthetic specifications</a> for more details and examples.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="16%">
<col width="64%">
</colgroup>
<thead><tr class="header">
<th>Aesthetic</th>
<th>Default</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>color</code></td>
<td><code>"black"</code></td>
<td>text and label border color</td>
</tr>
<tr class="even">
<td><code>size</code></td>
<td><code>3.88</code></td>
<td>font size</td>
</tr>
<tr class="odd">
<td><code>angle</code></td>
<td><code>0</code></td>
<td>angle of the text label</td>
</tr>
<tr class="even">
<td><code>alpha</code></td>
<td><code>NA</code></td>
<td>transparency of the text label</td>
</tr>
<tr class="odd">
<td><code>family</code></td>
<td><code>""</code></td>
<td>font name</td>
</tr>
<tr class="even">
<td><code>fontface</code></td>
<td><code>1</code></td>
<td>“plain”, “bold”, “italic”, “bold.italic”</td>
</tr>
<tr class="odd">
<td><code>lineheight</code></td>
<td><code>1.2</code></td>
<td>line height for text labels</td>
</tr>
<tr class="even">
<td><code>hjust</code></td>
<td><code>0.5</code></td>
<td>horizontal justification</td>
</tr>
<tr class="odd">
<td><code>vjust</code></td>
<td><code>0.5</code></td>
<td>vertical justification</td>
</tr>
<tr class="even">
<td><code>point.size</code></td>
<td><code>1</code></td>
<td>size of each point for each text label</td>
</tr>
<tr class="odd">
<td><code>segment.linetype</code></td>
<td><code>1</code></td>
<td>line segment solid, dashed, etc.</td>
</tr>
<tr class="even">
<td><code>segment.color</code></td>
<td><code>"black"</code></td>
<td>line segment color</td>
</tr>
<tr class="odd">
<td><code>segment.size</code></td>
<td><code>0.5 mm</code></td>
<td>line segment thickness</td>
</tr>
<tr class="even">
<td><code>segment.alpha</code></td>
<td><code>1.0</code></td>
<td>line segment transparency</td>
</tr>
<tr class="odd">
<td><code>segment.curvature</code></td>
<td><code>0</code></td>
<td>numeric, negative for left-hand and positive for right-hand curves, 0 for straight lines</td>
</tr>
<tr class="even">
<td><code>segment.angle</code></td>
<td><code>90</code></td>
<td>0-180, less than 90 skews control points toward the start point</td>
</tr>
<tr class="odd">
<td><code>segment.ncp</code></td>
<td><code>1</code></td>
<td>number of control points to make a smoother curve</td>
</tr>
<tr class="even">
<td><code>segment.shape</code></td>
<td><code>0.5</code></td>
<td>curve shape by control points approximation/interpolation (1 for cubic B-spline, -1 for Catmull-Rom spline)</td>
</tr>
<tr class="odd">
<td><code>segment.square</code></td>
<td><code>TRUE</code></td>
<td>
<code>TRUE</code> to place control points in city-block fashion, <code>FALSE</code> for oblique placement</td>
</tr>
<tr class="even">
<td><code>segment.squareShape</code></td>
<td><code>1</code></td>
<td>shape of the curve relative to additional control points inserted if square is <code>TRUE</code>
</td>
</tr>
<tr class="odd">
<td><code>segment.inflect</code></td>
<td><code>FALSE</code></td>
<td>curve inflection at the midpoint</td>
</tr>
<tr class="even">
<td><code>segment.debug</code></td>
<td><code>FALSE</code></td>
<td>display the curve debug information</td>
</tr>
</tbody>
</table>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<div id="hide-some-of-the-labels" class="section level3">
<h3 class="hasAnchor">
<a href="#hide-some-of-the-labels" class="anchor"></a>Hide some of the labels</h3>
<p>Set labels to the empty string <code>""</code> to hide them. All data points repel the non-empty labels.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)

<span class="no">dat2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(<span class="no">mtcars</span>, <span class="no">wt</span> <span class="kw">&gt;</span> <span class="fl">3</span> <span class="kw">&amp;</span> <span class="no">wt</span> <span class="kw">&lt;</span> <span class="fl">4</span>)
<span class="co"># Hide all of the text labels.</span>
<span class="no">dat2</span>$<span class="no">car</span> <span class="kw">&lt;-</span> <span class="st">""</span>
<span class="co"># Let's just label these items.</span>
<span class="no">ix_label</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">14</span>)
<span class="no">dat2</span>$<span class="no">car</span>[<span class="no">ix_label</span>] <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">dat2</span>)[<span class="no">ix_label</span>]

<span class="fu">ggplot</span>(<span class="no">dat2</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>() +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="no">dat2</span>$<span class="no">car</span> <span class="kw">==</span> <span class="st">""</span>, <span class="st">"grey50"</span>, <span class="st">"red"</span>))</pre></body></html></div>
<p><img src="examples_files/figure-html/empty_string-1.png" width="700"></p>
<p>We can quickly repel a few text labels from 10,000 data points:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)

<span class="no">dat3</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
    <span class="kw">wt</span>  <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="kw">n</span> <span class="kw">=</span> <span class="fl">10000</span>, <span class="kw">mean</span> <span class="kw">=</span> <span class="fl">3</span>),
    <span class="kw">mpg</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="kw">n</span> <span class="kw">=</span> <span class="fl">10000</span>, <span class="kw">mean</span> <span class="kw">=</span> <span class="fl">19</span>),
    <span class="kw">car</span> <span class="kw">=</span> <span class="st">""</span>
  ),
  <span class="no">dat2</span>[,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"wt"</span>, <span class="st">"mpg"</span>, <span class="st">"car"</span>)]
)

<span class="fu">ggplot</span>(<span class="no">dat3</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu">geom_point</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">dat3</span>[<span class="no">dat3</span>$<span class="no">car</span> <span class="kw">==</span> <span class="st">""</span>,], <span class="kw">color</span> <span class="kw">=</span> <span class="st">"grey50"</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(<span class="kw">box.padding</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">max.overlaps</span> <span class="kw">=</span> <span class="fl">Inf</span>) +
  <span class="fu">geom_point</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">dat3</span>[<span class="no">dat3</span>$<span class="no">car</span> <span class="kw">!=</span> <span class="st">""</span>,], <span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>)</pre></body></html></div>
<p><img src="examples_files/figure-html/empty_string_big-1.png" width="700"></p>
</div>
<div id="always-show-all-labels-even-when-they-have-too-many-overlaps" class="section level3">
<h3 class="hasAnchor">
<a href="#always-show-all-labels-even-when-they-have-too-many-overlaps" class="anchor"></a>Always show all labels, even when they have too many overlaps</h3>
<p>Some text labels will be discarded if they have too many overlaps.</p>
<p>We can expect to see a warning if some data points could not be labeled due to too many overlaps.</p>
<p>Set <code>max.overlaps = Inf</code> to override this behavior and always show all labels, regardless of too many overlaps.</p>
<p>Use <code><a href="https://rdrr.io/r/base/options.html">options(ggrepel.max.overlaps = Inf)</a></code> to set this globally for your entire session. The global option can be overridden by providing the <code>max.overlaps</code> argument to <code><a href="../reference/geom_text_repel.html">geom_text_repel()</a></code>.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)

<span class="no">n</span> <span class="kw">&lt;-</span> <span class="fl">15</span>
<span class="no">dat4</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
  <span class="kw">x</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">1</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="no">n</span>),
  <span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">1</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="no">n</span>),
  <span class="kw">label</span> <span class="kw">=</span> <span class="no">letters</span>[<span class="fl">1</span>:<span class="no">n</span>]
)

<span class="co"># Set it globally:</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span>(<span class="kw">ggrepel.max.overlaps</span> <span class="kw">=</span> <span class="fl">Inf</span>)

<span class="no">p1</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">dat4</span>, <span class="fu">aes</span>(<span class="no">x</span>, <span class="no">y</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">label</span>)) +
  <span class="fu">geom_point</span>() +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_label_repel</a></span>(<span class="kw">box.padding</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">max.overlaps</span> <span class="kw">=</span> <span class="fl">10</span>) +
  <span class="fu">labs</span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"max.overlaps = 10 (default)"</span>)

<span class="no">p2</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">dat4</span>, <span class="fu">aes</span>(<span class="no">x</span>, <span class="no">y</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">label</span>)) +
  <span class="fu">geom_point</span>() +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_label_repel</a></span>(<span class="kw">box.padding</span> <span class="kw">=</span> <span class="fl">0.5</span>) +
  <span class="fu">labs</span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"max.overlaps = Inf"</span>)

<span class="kw pkg">gridExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span>(<span class="no">p1</span>, <span class="no">p2</span>, <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">2</span>)</pre></body></html></div>
<pre><code>## Warning: ggrepel: 15 unlabeled data points (too many overlaps). Consider
## increasing max.overlaps</code></pre>
<p><img src="examples_files/figure-html/show_all_labels-1.png" width="700"></p>
</div>
<div id="do-not-repel-labels-from-data-points" class="section level3">
<h3 class="hasAnchor">
<a href="#do-not-repel-labels-from-data-points" class="anchor"></a>Do not repel labels from data points</h3>
<p>Set <code>point.size = NA</code> to prevent label repulsion away from data points.</p>
<p>Labels will still move away from each other and away from the edges of the plot.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)
<span class="fu">ggplot</span>(<span class="no">dat</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(<span class="kw">point.size</span> <span class="kw">=</span> <span class="fl">NA</span>)</pre></body></html></div>
<p><img src="examples_files/figure-html/point_size_na-1.png" width="700"></p>
</div>
<div id="do-not-repel-labels-from-plot-panel-edges" class="section level3">
<h3 class="hasAnchor">
<a href="#do-not-repel-labels-from-plot-panel-edges" class="anchor"></a>Do not repel labels from plot (panel) edges</h3>
<p>Set <code>xlim</code> or <code>ylim</code> to <code>Inf</code> or <code>-Inf</code> to disable repulsion away from the edges of the panel. Use <code>NA</code> to indicate the edge of the panel.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)
<span class="fu">ggplot</span>(<span class="no">dat</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="co"># Repel away from the left edge, not from the right.</span>
    <span class="kw">xlim</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">NA</span>, <span class="fl">Inf</span>),
    <span class="co"># Do not repel from top or bottom edges.</span>
    <span class="kw">ylim</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">Inf</span>, <span class="fl">Inf</span>)
  )</pre></body></html></div>
<p><img src="examples_files/figure-html/plot_edges-1.png" width="700"></p>
<p>We can also disable clipping to allow the labels to go beyond the edges of the panel.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)
<span class="fu">ggplot</span>(<span class="no">dat</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>) +
  <span class="fu">coord_cartesian</span>(<span class="kw">clip</span> <span class="kw">=</span> <span class="st">"off"</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_label_repel</a></span>(<span class="kw">fill</span> <span class="kw">=</span> <span class="st">"white"</span>, <span class="kw">xlim</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">Inf</span>, <span class="fl">Inf</span>), <span class="kw">ylim</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">Inf</span>, <span class="fl">Inf</span>))</pre></body></html></div>
<p><img src="examples_files/figure-html/clipping-1.png" width="700"></p>
</div>
<div id="expand-the-scale-to-make-room-for-labels" class="section level3">
<h3 class="hasAnchor">
<a href="#expand-the-scale-to-make-room-for-labels" class="anchor"></a>Expand the scale to make room for labels</h3>
<p>Since the text labels repel away from the edges of the plot panel, we might want to expand the scale to give them more room to fit.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)
<span class="no">d</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
  <span class="kw">x1</span> <span class="kw">=</span> <span class="fl">1</span>,
  <span class="kw">y1</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">10</span>),
  <span class="kw">x2</span> <span class="kw">=</span> <span class="fl">2</span>,
  <span class="kw">y2</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">10</span>),
  <span class="kw">lab</span> <span class="kw">=</span> <span class="no">state.name</span>[<span class="fl">1</span>:<span class="fl">10</span>]
)

<span class="no">p</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">d</span>, <span class="fu">aes</span>(<span class="no">x1</span>, <span class="no">y1</span>, <span class="kw">xend</span> <span class="kw">=</span> <span class="no">x2</span>, <span class="kw">yend</span> <span class="kw">=</span> <span class="no">y2</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">lab</span>, <span class="kw">col</span> <span class="kw">=</span> <span class="no">lab</span>)) +
  <span class="fu">geom_segment</span>(<span class="kw">size</span> <span class="kw">=</span> <span class="fl">1</span>) +
  <span class="fu">guides</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"none"</span>) +
  <span class="fu">theme</span>(<span class="kw">axis.title.x</span> <span class="kw">=</span> <span class="fu">element_blank</span>()) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="kw">nudge_x</span> <span class="kw">=</span> -<span class="fl">0.2</span>, <span class="kw">direction</span> <span class="kw">=</span> <span class="st">"y"</span>, <span class="kw">hjust</span> <span class="kw">=</span> <span class="st">"right"</span>
  ) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="fu">aes</span>(<span class="no">x2</span>, <span class="no">y2</span>), <span class="kw">nudge_x</span> <span class="kw">=</span> <span class="fl">0.1</span>, <span class="kw">direction</span> <span class="kw">=</span> <span class="st">"y"</span>, <span class="kw">hjust</span> <span class="kw">=</span> <span class="st">"left"</span>
  )

<span class="no">p</span></pre></body></html></div>
<p><img src="examples_files/figure-html/expand_scale-1.png" width="700"></p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">p</span> + <span class="fu">scale_x_continuous</span>(
  <span class="kw">breaks</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fl">2</span>, <span class="kw">labels</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Dimension 1"</span>, <span class="st">"Dimension 2"</span>),
  <span class="kw">expand</span> <span class="kw">=</span> <span class="fu">expansion</span>(<span class="kw">mult</span> <span class="kw">=</span> <span class="fl">0.5</span>)
)</pre></body></html></div>
<p><img src="examples_files/figure-html/expand_scale-2.png" width="700"></p>
</div>
<div id="always-or-never-draw-line-segments" class="section level3">
<h3 class="hasAnchor">
<a href="#always-or-never-draw-line-segments" class="anchor"></a>Always (or never) draw line segments</h3>
<p>Use <code>min.segment.length = 0</code> to draw all line segments, no matter how short they are.</p>
<p>Use <code>min.segment.length = Inf</code> to never draw any line segments, no matter how long they are.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="no">p</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">dat</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>)

<span class="no">p1</span> <span class="kw">&lt;-</span> <span class="no">p</span> +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(<span class="kw">min.segment.length</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">seed</span> <span class="kw">=</span> <span class="fl">42</span>, <span class="kw">box.padding</span> <span class="kw">=</span> <span class="fl">0.5</span>) +
  <span class="fu">labs</span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"min.segment.length = 0"</span>)

<span class="no">p2</span> <span class="kw">&lt;-</span> <span class="no">p</span> +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(<span class="kw">min.segment.length</span> <span class="kw">=</span> <span class="fl">Inf</span>, <span class="kw">seed</span> <span class="kw">=</span> <span class="fl">42</span>, <span class="kw">box.padding</span> <span class="kw">=</span> <span class="fl">0.5</span>) +
  <span class="fu">labs</span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"min.segment.length = Inf"</span>)

<span class="kw pkg">gridExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span>(<span class="no">p1</span>, <span class="no">p2</span>, <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">2</span>)</pre></body></html></div>
<p><img src="examples_files/figure-html/all_segments-1.png" width="700"></p>
</div>
<div id="make-curved-line-segments-or-arrows" class="section level3">
<h3 class="hasAnchor">
<a href="#make-curved-line-segments-or-arrows" class="anchor"></a>Make curved line segments or arrows</h3>
<p>The line segments can be curved as in <code>geom_curve()</code> from ggplot2.</p>
<ul>
<li>
<code>segment.curvature = 1</code> increases right-hand curvature, negative values would increase left-hand curvature, 0 makes straight lines</li>
<li>
<code>segment.ncp = 3</code> gives 3 control points for the curve</li>
<li>
<code>segment.angle = 20</code> skews the curve towards the start, values greater than 90 would skew toward the end</li>
</ul>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)
<span class="fu">ggplot</span>(<span class="no">dat</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="kw">nudge_x</span> <span class="kw">=</span> <span class="fl">.15</span>,
    <span class="kw">box.padding</span> <span class="kw">=</span> <span class="fl">0.5</span>,
    <span class="kw">nudge_y</span> <span class="kw">=</span> <span class="fl">1</span>,
    <span class="kw">segment.curvature</span> <span class="kw">=</span> -<span class="fl">0.1</span>,
    <span class="kw">segment.ncp</span> <span class="kw">=</span> <span class="fl">3</span>,
    <span class="kw">segment.angle</span> <span class="kw">=</span> <span class="fl">20</span>
  )</pre></body></html></div>
<p><img src="examples_files/figure-html/line_curve-1.png" width="700"></p>
<p>Setting the curvature to a value near zero gives a sharp angle:</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)
<span class="no">cars</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Volvo 142E"</span>, <span class="st">"Merc 230"</span>)

<span class="fu">ggplot</span>(<span class="no">dat</span>) +
  <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="no">car</span> <span class="kw">%in%</span> <span class="no">cars</span>, <span class="no">car</span>, <span class="st">""</span>)) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="kw">point.padding</span> <span class="kw">=</span> <span class="fl">0.2</span>,
    <span class="kw">nudge_x</span> <span class="kw">=</span> <span class="fl">.15</span>,
    <span class="kw">nudge_y</span> <span class="kw">=</span> <span class="fl">.5</span>,
    <span class="kw">segment.curvature</span> <span class="kw">=</span> -<span class="fl">1e-20</span>,
    <span class="kw">arrow</span> <span class="kw">=</span> <span class="fu">arrow</span>(<span class="kw">length</span> <span class="kw">=</span> <span class="fu">unit</span>(<span class="fl">0.015</span>, <span class="st">"npc"</span>))
  ) +
  <span class="fu">theme</span>(<span class="kw">legend.position</span> <span class="kw">=</span> <span class="st">"none"</span>)</pre></body></html></div>
<p><img src="examples_files/figure-html/line_curve_annotate-1.png" width="700"></p>
<p>Set <code>segment.square</code>to <code>FALSE</code> to get oblique curves, and <code>segment.inflect</code> to <code>TRUE</code> to introduce an inflection point.</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)

<span class="no">cars_subset</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">mtcars</span>, <span class="fl">5</span>)
<span class="no">cars_subset</span>$<span class="no">car</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">cars_subset</span>)

<span class="no">cars_subset_curves</span> <span class="kw">&lt;-</span> <span class="no">cars_subset</span>[<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">cars_subset</span>)), <span class="kw">times</span> <span class="kw">=</span> <span class="fl">4</span>), ]
<span class="no">cars_subset_curves</span>$<span class="no">square</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">TRUE</span>, <span class="fl">FALSE</span>), <span class="kw">each</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">cars_subset</span>) * <span class="fl">2</span>)
<span class="no">cars_subset_curves</span>$<span class="no">inflect</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">TRUE</span>, <span class="fl">FALSE</span>, <span class="fl">TRUE</span>, <span class="fl">FALSE</span>), <span class="kw">each</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">cars_subset</span>))

<span class="fu">ggplot</span>(<span class="no">cars_subset_curves</span>, <span class="fu">aes</span>(<span class="kw">y</span> <span class="kw">=</span> <span class="no">wt</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu">facet_grid</span>(<span class="no">square</span> ~ <span class="no">inflect</span>, <span class="kw">labeller</span> <span class="kw">=</span> <span class="fu">labeller</span>(<span class="kw">.default</span> <span class="kw">=</span> <span class="no">label_both</span>)) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>) +
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html">ylim</a></span>(<span class="fl">1</span>, <span class="fl">4.5</span>) +
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="fl">1</span>, <span class="fl">1.375</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="fu">aes</span>(
      <span class="kw">segment.square</span>  <span class="kw">=</span> <span class="no">square</span>,
      <span class="kw">segment.inflect</span> <span class="kw">=</span> <span class="no">inflect</span>,
    ),
    <span class="kw">force</span>             <span class="kw">=</span> <span class="fl">0.5</span>,
    <span class="kw">nudge_x</span>           <span class="kw">=</span> <span class="fl">0.15</span>,
    <span class="kw">direction</span>         <span class="kw">=</span> <span class="st">"y"</span>,
    <span class="kw">hjust</span>             <span class="kw">=</span> <span class="fl">0</span>,
    <span class="kw">segment.size</span>      <span class="kw">=</span> <span class="fl">0.2</span>,
    <span class="kw">segment.curvature</span> <span class="kw">=</span> -<span class="fl">0.1</span>
  ) +
  <span class="fu">theme</span>(
    <span class="kw">axis.line.x</span>  <span class="kw">=</span> <span class="fu">element_blank</span>(),
    <span class="kw">axis.ticks.x</span> <span class="kw">=</span> <span class="fu">element_blank</span>(),
    <span class="kw">axis.text.x</span>  <span class="kw">=</span> <span class="fu">element_blank</span>(),
    <span class="kw">axis.title.x</span> <span class="kw">=</span> <span class="fu">element_blank</span>()
  )</pre></body></html></div>
<p><img src="examples_files/figure-html/line_inflect_and_square-1.png" width="700"></p>
<p>Use <code>segment.shape</code> to adjust the interpolation of the control points:</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)

<span class="no">cars_subset_shapes</span> <span class="kw">&lt;-</span> <span class="no">cars_subset</span>[<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">cars_subset</span>)), <span class="kw">times</span> <span class="kw">=</span> <span class="fl">5</span>), ]
<span class="no">cars_subset_shapes</span>$<span class="no">shape</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">1</span>, -<span class="fl">0.5</span>, <span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span>), <span class="kw">each</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">cars_subset</span>))

<span class="fu">ggplot</span>(<span class="no">cars_subset_shapes</span>, <span class="fu">aes</span>(<span class="kw">y</span> <span class="kw">=</span> <span class="no">wt</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu">facet_wrap</span>(<span class="st">'shape'</span>, <span class="kw">labeller</span> <span class="kw">=</span> <span class="fu">labeller</span>(<span class="kw">.default</span> <span class="kw">=</span> <span class="no">label_both</span>), <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">1</span>) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>) +
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html">ylim</a></span>(<span class="fl">1</span>, <span class="fl">4.5</span>) +
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="fl">1</span>, <span class="fl">1.375</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="fu">aes</span>(
      <span class="kw">segment.shape</span>   <span class="kw">=</span> <span class="no">shape</span>
    ),
    <span class="kw">force</span>             <span class="kw">=</span> <span class="fl">0.5</span>,
    <span class="kw">nudge_x</span>           <span class="kw">=</span> <span class="fl">0.25</span>,
    <span class="kw">direction</span>         <span class="kw">=</span> <span class="st">"y"</span>,
    <span class="kw">hjust</span>             <span class="kw">=</span> <span class="fl">0</span>,
    <span class="kw">segment.size</span>      <span class="kw">=</span> <span class="fl">0.2</span>,
    <span class="kw">segment.curvature</span> <span class="kw">=</span> -<span class="fl">0.6</span>,
    <span class="kw">segment.angle</span>     <span class="kw">=</span> <span class="fl">45</span>,
    <span class="kw">segment.ncp</span>       <span class="kw">=</span> <span class="fl">2</span>,
    <span class="kw">segment.square</span>    <span class="kw">=</span> <span class="fl">FALSE</span>,
    <span class="kw">segment.inflect</span>   <span class="kw">=</span> <span class="fl">TRUE</span>
  ) +
  <span class="fu">theme</span>(
    <span class="kw">axis.line.x</span>  <span class="kw">=</span> <span class="fu">element_blank</span>(),
    <span class="kw">axis.ticks.x</span> <span class="kw">=</span> <span class="fu">element_blank</span>(),
    <span class="kw">axis.text.x</span>  <span class="kw">=</span> <span class="fu">element_blank</span>(),
    <span class="kw">axis.title.x</span> <span class="kw">=</span> <span class="fu">element_blank</span>()
  )</pre></body></html></div>
<p><img src="examples_files/figure-html/line_shape-1.png" width="700"></p>
<p>We can use different line types (1, 2, 3, 4, 5, or 6).</p>
<p><img src="examples_files/figure-html/all_linetypes-1.png" width="700"></p>
<p>And different types of arrows. See <a href="https://ggplot2.tidyverse.org/reference/geom_segment.html">ggplot2::geom_segment()</a> for more details.</p>
<p><img src="examples_files/figure-html/all_arrows-1.png" width="700"></p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)
<span class="no">cars</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Volvo 142E"</span>, <span class="st">"Merc 230"</span>)

<span class="fu">ggplot</span>(<span class="no">dat</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="no">car</span> <span class="kw">%in%</span> <span class="no">cars</span>, <span class="no">car</span>, <span class="st">""</span>))) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="kw">point.padding</span> <span class="kw">=</span> <span class="fl">0.2</span>,
    <span class="kw">nudge_x</span> <span class="kw">=</span> <span class="fl">.15</span>,
    <span class="kw">nudge_y</span> <span class="kw">=</span> <span class="fl">.5</span>,
    <span class="kw">segment.linetype</span> <span class="kw">=</span> <span class="fl">6</span>,
    <span class="kw">segment.curvature</span> <span class="kw">=</span> -<span class="fl">1e-20</span>,
    <span class="kw">arrow</span> <span class="kw">=</span> <span class="fu">arrow</span>(<span class="kw">length</span> <span class="kw">=</span> <span class="fu">unit</span>(<span class="fl">0.015</span>, <span class="st">"npc"</span>))
  )</pre></body></html></div>
<p><img src="examples_files/figure-html/line_curve_annotate_linetype-1.png" width="700"></p>
</div>
<div id="repel-labels-from-data-points-with-different-sizes" class="section level3 tabset">
<h3 class="hasAnchor">
<a href="#repel-labels-from-data-points-with-different-sizes" class="anchor"></a>Repel labels from data points with different sizes</h3>
<p>We can use the <a href="https://ggplot2.tidyverse.org/reference/continuous_scale.html">continuous_scale()</a> function from ggplot2. It allows us to specify a single scale that applies to multiple aesthetics.</p>
<p>For ggrepel, we want to apply a single size scale to two aesthetics:</p>
<ul>
<li>
<code>size</code>, which tells ggplot2 the size of the points to draw on the plot</li>
<li>
<code>point.size</code>, which tells ggrepel the point size, so it can position the text labels away from them</li>
</ul>
<p>In the example below, there is a third <code>size</code> in the call to <code><a href="../reference/geom_text_repel.html">geom_text_repel()</a></code> to specify the font size for the text labels.</p>
<div id="geom_text_repel" class="section level4">
<h4 class="hasAnchor">
<a href="#geom_text_repel" class="anchor"></a>geom_text_repel()</h4>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="no">my_pal</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">range</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">6</span>)) {
  <span class="fu"><a href="https://rdrr.io/r/base/force.html">force</a></span>(<span class="no">range</span>)
  <span class="kw">function</span>(<span class="no">x</span>) <span class="kw pkg">scales</span><span class="kw ns">::</span><span class="fu"><a href="https://scales.r-lib.org//reference/rescale.html">rescale</a></span>(<span class="no">x</span>, <span class="kw">to</span> <span class="kw">=</span> <span class="no">range</span>, <span class="kw">from</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">1</span>))
}

<span class="fu">ggplot</span>(<span class="no">dat</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="kw">size</span> <span class="kw">=</span> <span class="no">cyl</span>), <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.6</span>) + <span class="co"># data point size</span>
  <span class="fu">continuous_scale</span>(
    <span class="kw">aesthetics</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"size"</span>, <span class="st">"point.size"</span>), <span class="kw">scale_name</span> <span class="kw">=</span> <span class="st">"size"</span>,
    <span class="kw">palette</span> <span class="kw">=</span> <span class="fu">my_pal</span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>, <span class="fl">15</span>)),
    <span class="kw">guide</span> <span class="kw">=</span> <span class="fu">guide_legend</span>(<span class="kw">override.aes</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">label</span> <span class="kw">=</span> <span class="st">""</span>)) <span class="co"># hide "a" in legend</span>
  ) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="fu">aes</span>(<span class="kw">point.size</span> <span class="kw">=</span> <span class="no">cyl</span>), <span class="co"># data point size</span>
    <span class="kw">size</span> <span class="kw">=</span> <span class="fl">5</span>, <span class="co"># font size in the text labels</span>
    <span class="kw">point.padding</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="co"># additional padding around each point</span>
    <span class="kw">min.segment.length</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="co"># draw all line segments</span>
    <span class="kw">max.time</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">max.iter</span> <span class="kw">=</span> <span class="fl">1e5</span>, <span class="co"># stop after 1 second, or after 100,000 iterations</span>
    <span class="kw">box.padding</span> <span class="kw">=</span> <span class="fl">0.3</span> <span class="co"># additional padding around each text label</span>
  ) +
  <span class="fu">theme</span>(<span class="kw">legend.position</span> <span class="kw">=</span> <span class="st">"right"</span>)</pre></body></html></div>
<p><img src="examples_files/figure-html/point_size_cars-1.png" width="700"></p>
</div>
<div id="geom_label_repel" class="section level4">
<h4 class="hasAnchor">
<a href="#geom_label_repel" class="anchor"></a>geom_label_repel()</h4>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="no">my_pal</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">range</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">6</span>)) {
  <span class="fu"><a href="https://rdrr.io/r/base/force.html">force</a></span>(<span class="no">range</span>)
  <span class="kw">function</span>(<span class="no">x</span>) <span class="kw pkg">scales</span><span class="kw ns">::</span><span class="fu"><a href="https://scales.r-lib.org//reference/rescale.html">rescale</a></span>(<span class="no">x</span>, <span class="kw">to</span> <span class="kw">=</span> <span class="no">range</span>, <span class="kw">from</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">1</span>))
}

<span class="fu">ggplot</span>(<span class="no">dat</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_label_repel</a></span>(
    <span class="fu">aes</span>(<span class="kw">point.size</span> <span class="kw">=</span> <span class="no">cyl</span>), <span class="co"># data point size</span>
    <span class="kw">size</span> <span class="kw">=</span> <span class="fl">5</span>, <span class="co"># font size in the text labels</span>
    <span class="kw">point.padding</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="co"># additional padding around each point</span>
    <span class="kw">min.segment.length</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="co"># draw all line segments</span>
    <span class="kw">max.time</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">max.iter</span> <span class="kw">=</span> <span class="fl">1e5</span>, <span class="co"># stop after 1 second, or after 100,000 iterations</span>
    <span class="kw">box.padding</span> <span class="kw">=</span> <span class="fl">0.3</span> <span class="co"># additional padding around each text label</span>
  ) +
  <span class="co"># Put geom_point() after geom_label_repel, so the</span>
  <span class="co"># legend for geom_point() appears on the top layer.</span>
  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="kw">size</span> <span class="kw">=</span> <span class="no">cyl</span>), <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.6</span>) + <span class="co"># data point size</span>
  <span class="fu">continuous_scale</span>(
    <span class="kw">aesthetics</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"size"</span>, <span class="st">"point.size"</span>),
    <span class="kw">scale_name</span> <span class="kw">=</span> <span class="st">"size"</span>,
    <span class="kw">palette</span> <span class="kw">=</span> <span class="fu">my_pal</span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>, <span class="fl">15</span>)),
    <span class="kw">guide</span> <span class="kw">=</span> <span class="fu">guide_legend</span>(<span class="kw">override.aes</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">label</span> <span class="kw">=</span> <span class="st">""</span>)) <span class="co"># hide "a" in legend</span>
  ) +
  <span class="fu">theme</span>(<span class="kw">legend.position</span> <span class="kw">=</span> <span class="st">"right"</span>)</pre></body></html></div>
<p><img src="examples_files/figure-html/point_size_cars_label-1.png" width="700"></p>
</div>
</div>
<div id="limit-labels-to-a-specific-area" class="section level3">
<h3 class="hasAnchor">
<a href="#limit-labels-to-a-specific-area" class="anchor"></a>Limit labels to a specific area</h3>
<p>Use options <code>xlim</code> and <code>ylim</code> to constrain the labels to a specific area. Limits are specified in data coordinates. Use <code>NA</code> when there is no lower or upper bound in a particular direction.</p>
<p>Here we also use <code><a href="https://rdrr.io/r/grid/arrow.html">grid::arrow()</a></code> to render the segments as arrows.</p>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)

<span class="co"># All labels should be to the right of 3.</span>
<span class="no">x_limits</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">3</span>, <span class="fl">NA</span>)

<span class="no">p</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">dat</span>) +
  <span class="fu">aes</span>(
    <span class="kw">x</span> <span class="kw">=</span> <span class="no">wt</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>,
    <span class="kw">fill</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">cyl</span>), <span class="kw">segment.color</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">cyl</span>)
  ) +
  <span class="fu">geom_vline</span>(<span class="kw">xintercept</span> <span class="kw">=</span> <span class="no">x_limits</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="fl">3</span>) +
  <span class="fu">geom_point</span>() +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_label_repel</a></span>(
    <span class="kw">color</span> <span class="kw">=</span> <span class="st">"white"</span>,
    <span class="kw">arrow</span> <span class="kw">=</span> <span class="fu">arrow</span>(
      <span class="kw">length</span> <span class="kw">=</span> <span class="fu">unit</span>(<span class="fl">0.03</span>, <span class="st">"npc"</span>), <span class="kw">type</span> <span class="kw">=</span> <span class="st">"closed"</span>, <span class="kw">ends</span> <span class="kw">=</span> <span class="st">"first"</span>
    ),
    <span class="kw">xlim</span>  <span class="kw">=</span> <span class="no">x_limits</span>,
    <span class="kw">point.padding</span> <span class="kw">=</span> <span class="fl">NA</span>,
    <span class="kw">box.padding</span> <span class="kw">=</span> <span class="fl">0.1</span>
  ) +
  <span class="fu">scale_fill_discrete</span>(
    <span class="kw">name</span> <span class="kw">=</span> <span class="st">"cyl"</span>,
    <span class="co"># The same color scall will apply to both of these aesthetics.</span>
    <span class="kw">aesthetics</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"fill"</span>, <span class="st">"segment.color"</span>)
  )

<span class="no">p</span></pre></body></html></div>
<p><img src="examples_files/figure-html/xlim-1.png" width="700"></p>
</div>
<div id="remove-a-from-the-legend" class="section level3">
<h3 class="hasAnchor">
<a href="#remove-a-from-the-legend" class="anchor"></a>Remove “a” from the legend</h3>
<p>Sometimes we want to remove the “a” labels in the legend.</p>
<p>We can do that by overriding the legend aesthetics:</p>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="co"># Don't use "color" in the legend.</span>
<span class="no">p</span> + <span class="fu">guides</span>(<span class="kw">fill</span> <span class="kw">=</span> <span class="fu">guide_legend</span>(<span class="kw">override.aes</span> <span class="kw">=</span> <span class="fu">aes</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="fl">NA</span>)))</pre></body></html></div>
<div class="sourceCode" id="cb23"><html><body><pre class="r"><span class="co"># Or set the label to the empty string "" (or any other string).</span>
<span class="no">p</span> + <span class="fu">guides</span>(<span class="kw">fill</span> <span class="kw">=</span> <span class="fu">guide_legend</span>(<span class="kw">override.aes</span> <span class="kw">=</span> <span class="fu">aes</span>(<span class="kw">label</span> <span class="kw">=</span> <span class="st">""</span>)))</pre></body></html></div>
<p><img src="examples_files/figure-html/remove_a_2-1.png" width="700"></p>
</div>
<div id="align-labels-on-the-top-or-bottom-edge" class="section level3">
<h3 class="hasAnchor">
<a href="#align-labels-on-the-top-or-bottom-edge" class="anchor"></a>Align labels on the top or bottom edge</h3>
<p>Use <code>hjust</code> to justify the text neatly:</p>
<ul>
<li>
<code>hjust = 0</code> for left-align</li>
<li>
<code>hjust = 0.5</code> for center</li>
<li>
<code>hjust = 1</code> for right-align</li>
</ul>
<p>Sometimes the labels do not align perfectly. Try using <code>direction = "x"</code> to limit label movement to the x-axis (left and right) or <code>direction = "y"</code> to limit movement to the y-axis (up and down). The default is <code>direction = "both"</code>.</p>
<p>Also try using <a href="https://ggplot2.tidyverse.org/reference/lims.html">xlim()</a> and <a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim()</a> to increase the size of the plotting area so all of the labels fit comfortably.</p>
<div class="sourceCode" id="cb24"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)

<span class="fu">ggplot</span>(<span class="no">mtcars</span>, <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">wt</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">mtcars</span>))) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="kw">force_pull</span>   <span class="kw">=</span> <span class="fl">0</span>, <span class="co"># do not pull toward data points</span>
    <span class="kw">nudge_y</span>      <span class="kw">=</span> <span class="fl">0.05</span>,
    <span class="kw">direction</span>    <span class="kw">=</span> <span class="st">"x"</span>,
    <span class="kw">angle</span>        <span class="kw">=</span> <span class="fl">90</span>,
    <span class="kw">hjust</span>        <span class="kw">=</span> <span class="fl">0</span>,
    <span class="kw">segment.size</span> <span class="kw">=</span> <span class="fl">0.2</span>,
    <span class="kw">max.iter</span> <span class="kw">=</span> <span class="fl">1e4</span>, <span class="kw">max.time</span> <span class="kw">=</span> <span class="fl">1</span>
  ) +
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="fl">1</span>, <span class="fl">6</span>) +
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html">ylim</a></span>(<span class="fl">1</span>, <span class="fl">0.8</span>) +
  <span class="fu">theme</span>(
    <span class="kw">axis.line.y</span>  <span class="kw">=</span> <span class="fu">element_blank</span>(),
    <span class="kw">axis.ticks.y</span> <span class="kw">=</span> <span class="fu">element_blank</span>(),
    <span class="kw">axis.text.y</span>  <span class="kw">=</span> <span class="fu">element_blank</span>(),
    <span class="kw">axis.title.y</span> <span class="kw">=</span> <span class="fu">element_blank</span>()
  )</pre></body></html></div>
<p><img src="examples_files/figure-html/direction_x-1.png" width="700"></p>
<p>Align text vertically with <code>nudge_y</code> and allow the labels to move horizontally with <code>direction = "x"</code>:</p>
<div class="sourceCode" id="cb25"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)

<span class="no">dat</span> <span class="kw">&lt;-</span> <span class="no">mtcars</span>
<span class="no">dat</span>$<span class="no">car</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">dat</span>)

<span class="fu">ggplot</span>(<span class="no">dat</span>, <span class="fu">aes</span>(<span class="no">qsec</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="kw">data</span>          <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(<span class="no">dat</span>, <span class="no">mpg</span> <span class="kw">&gt;</span> <span class="fl">30</span>),
    <span class="kw">nudge_y</span>       <span class="kw">=</span> <span class="fl">36</span> - <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(<span class="no">dat</span>, <span class="no">mpg</span> <span class="kw">&gt;</span> <span class="fl">30</span>)$<span class="no">mpg</span>,
    <span class="kw">segment.size</span>  <span class="kw">=</span> <span class="fl">0.2</span>,
    <span class="kw">segment.color</span> <span class="kw">=</span> <span class="st">"grey50"</span>,
    <span class="kw">direction</span>     <span class="kw">=</span> <span class="st">"x"</span>
  ) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="no">dat</span>$<span class="no">mpg</span> <span class="kw">&gt;</span> <span class="fl">30</span>, <span class="st">"red"</span>, <span class="st">"black"</span>)) +
  <span class="fu">scale_x_continuous</span>(<span class="kw">expand</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.05</span>, <span class="fl">0.05</span>)) +
  <span class="fu">scale_y_continuous</span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">NA</span>, <span class="fl">36</span>))</pre></body></html></div>
<p><img src="examples_files/figure-html/neat-offset-x-1.png" width="700"></p>
</div>
<div id="align-labels-on-the-left-or-right-edge" class="section level3">
<h3 class="hasAnchor">
<a href="#align-labels-on-the-left-or-right-edge" class="anchor"></a>Align labels on the left or right edge</h3>
<p>Set <code>direction</code> to “y” and try <code>hjust</code> 0.5, 0, and 1:</p>
<div class="sourceCode" id="cb26"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)

<span class="no">p</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">mtcars</span>, <span class="fu">aes</span>(<span class="kw">y</span> <span class="kw">=</span> <span class="no">wt</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">mtcars</span>))) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>) +
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html">ylim</a></span>(<span class="fl">1</span>, <span class="fl">5.5</span>) +
  <span class="fu">theme</span>(
    <span class="kw">axis.line.x</span>  <span class="kw">=</span> <span class="fu">element_blank</span>(),
    <span class="kw">axis.ticks.x</span> <span class="kw">=</span> <span class="fu">element_blank</span>(),
    <span class="kw">axis.text.x</span>  <span class="kw">=</span> <span class="fu">element_blank</span>(),
    <span class="kw">axis.title.x</span> <span class="kw">=</span> <span class="fu">element_blank</span>()
  )

<span class="no">p1</span> <span class="kw">&lt;-</span> <span class="no">p</span> +
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="fl">1</span>, <span class="fl">1.375</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="kw">force</span>        <span class="kw">=</span> <span class="fl">0.5</span>,
    <span class="kw">nudge_x</span>      <span class="kw">=</span> <span class="fl">0.15</span>,
    <span class="kw">direction</span>    <span class="kw">=</span> <span class="st">"y"</span>,
    <span class="kw">hjust</span>        <span class="kw">=</span> <span class="fl">0</span>,
    <span class="kw">segment.size</span> <span class="kw">=</span> <span class="fl">0.2</span>
  ) +
  <span class="fu">ggtitle</span>(<span class="st">"hjust = 0"</span>)

<span class="no">p2</span> <span class="kw">&lt;-</span> <span class="no">p</span> +
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="fl">1</span>, <span class="fl">1.375</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="kw">force</span>        <span class="kw">=</span> <span class="fl">0.5</span>,
    <span class="kw">nudge_x</span>      <span class="kw">=</span> <span class="fl">0.2</span>,
    <span class="kw">direction</span>    <span class="kw">=</span> <span class="st">"y"</span>,
    <span class="kw">hjust</span>        <span class="kw">=</span> <span class="fl">0.5</span>,
    <span class="kw">segment.size</span> <span class="kw">=</span> <span class="fl">0.2</span>
  ) +
  <span class="fu">ggtitle</span>(<span class="st">"hjust = 0.5 (default)"</span>)

<span class="no">p3</span> <span class="kw">&lt;-</span> <span class="no">p</span> +
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="fl">0.25</span>, <span class="fl">1</span>) +
  <span class="fu">scale_y_continuous</span>(<span class="kw">position</span> <span class="kw">=</span> <span class="st">"right"</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="kw">force</span>        <span class="kw">=</span> <span class="fl">0.5</span>,
    <span class="kw">nudge_x</span>      <span class="kw">=</span> -<span class="fl">0.25</span>,
    <span class="kw">direction</span>    <span class="kw">=</span> <span class="st">"y"</span>,
    <span class="kw">hjust</span>        <span class="kw">=</span> <span class="fl">1</span>,
    <span class="kw">segment.size</span> <span class="kw">=</span> <span class="fl">0.2</span>
  ) +
  <span class="fu">ggtitle</span>(<span class="st">"hjust = 1"</span>)

<span class="kw pkg">gridExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span>(<span class="no">p1</span>, <span class="no">p2</span>, <span class="no">p3</span>, <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">3</span>)</pre></body></html></div>
<p><img src="examples_files/figure-html/direction_y-1.png" width="700"></p>
<p>Align text horizontally with <code>nudge_x</code> and <code>hjust</code>, and allow the labels to move vertically with <code>direction = "y"</code>:</p>
<div class="sourceCode" id="cb27"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)

<span class="no">dat</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(<span class="no">mtcars</span>, <span class="no">wt</span> <span class="kw">&gt;</span> <span class="fl">2.75</span> <span class="kw">&amp;</span> <span class="no">wt</span> <span class="kw">&lt;</span> <span class="fl">3.45</span>)
<span class="no">dat</span>$<span class="no">car</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">dat</span>)

<span class="fu">ggplot</span>(<span class="no">dat</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="kw">data</span>          <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(<span class="no">dat</span>, <span class="no">wt</span> <span class="kw">&gt;</span> <span class="fl">3</span>),
    <span class="kw">nudge_x</span>       <span class="kw">=</span> <span class="fl">3.5</span> - <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(<span class="no">dat</span>, <span class="no">wt</span> <span class="kw">&gt;</span> <span class="fl">3</span>)$<span class="no">wt</span>,
    <span class="kw">segment.size</span>  <span class="kw">=</span> <span class="fl">0.2</span>,
    <span class="kw">segment.color</span> <span class="kw">=</span> <span class="st">"grey50"</span>,
    <span class="kw">direction</span>     <span class="kw">=</span> <span class="st">"y"</span>,
    <span class="kw">hjust</span>         <span class="kw">=</span> <span class="fl">0</span>
  ) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="kw">data</span>          <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(<span class="no">dat</span>, <span class="no">wt</span> <span class="kw">&lt;</span> <span class="fl">3</span>),
    <span class="kw">nudge_x</span>       <span class="kw">=</span> <span class="fl">2.7</span> - <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(<span class="no">dat</span>, <span class="no">wt</span> <span class="kw">&lt;</span> <span class="fl">3</span>)$<span class="no">wt</span>,
    <span class="kw">segment.size</span>  <span class="kw">=</span> <span class="fl">0.2</span>,
    <span class="kw">segment.color</span> <span class="kw">=</span> <span class="st">"grey50"</span>,
    <span class="kw">direction</span>     <span class="kw">=</span> <span class="st">"y"</span>,
    <span class="kw">hjust</span>         <span class="kw">=</span> <span class="fl">1</span>
  ) +
  <span class="fu">scale_x_continuous</span>(
    <span class="kw">breaks</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2.5</span>, <span class="fl">2.75</span>, <span class="fl">3</span>, <span class="fl">3.25</span>, <span class="fl">3.5</span>),
    <span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2.4</span>, <span class="fl">3.8</span>)
  ) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>)</pre></body></html></div>
<p><img src="examples_files/figure-html/neat-offset-y-1.png" width="700"></p>
</div>
<div id="using-ggrepel-with-stat_summary" class="section level3">
<h3 class="hasAnchor">
<a href="#using-ggrepel-with-stat_summary" class="anchor"></a>Using ggrepel with stat_summary()</h3>
<p>We can use <code>stat_summary()</code> with <code>geom = "text_repel"</code>.</p>
<div class="alert alert-info" role="alert">
<p><strong>Note:</strong> When we use <code><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">ggplot2::stat_summary()</a></code> with ggrepel, we should prefer <code><a href="../reference/position_nudge_repel.html">position_nudge_repel()</a></code> instead of <code><a href="https://ggplot2.tidyverse.org/reference/position_nudge.html">ggplot2::position_nudge()</a></code>.</p>
</div>
<p>The <code><a href="../reference/position_nudge_repel.html">position_nudge_repel()</a></code> function nudges the text label’s position, but it also remembers the original position of the data point.</p>
<div class="sourceCode" id="cb28"><html><body><pre class="r"><span class="no">p</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">mtcars</span>, <span class="fu">aes</span>(<span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">cyl</span>), <span class="no">mpg</span>)) +
  <span class="fu">stat_summary</span>(
    <span class="kw">fill</span> <span class="kw">=</span> <span class="st">"gray90"</span>,
    <span class="kw">colour</span> <span class="kw">=</span> <span class="st">"black"</span>,
    <span class="kw">fun</span> <span class="kw">=</span> <span class="st">"mean"</span>,
    <span class="kw">geom</span> <span class="kw">=</span> <span class="st">"col"</span>
  )

<span class="no">p1</span> <span class="kw">&lt;-</span> <span class="no">p</span> + <span class="fu">stat_summary</span>(
    <span class="fu">aes</span>(<span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="fu">stat</span>(<span class="no">y</span>))),
    <span class="kw">fun</span> <span class="kw">=</span> <span class="st">"mean"</span>,
    <span class="kw">geom</span> <span class="kw">=</span> <span class="st">"text_repel"</span>,
    <span class="kw">min.segment.length</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="co"># always draw segments</span>
    <span class="kw">position</span> <span class="kw">=</span> <span class="fu">position_nudge</span>(<span class="kw">y</span> <span class="kw">=</span> -<span class="fl">2</span>)
  ) +
  <span class="fu">labs</span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"position_nudge()"</span>)

<span class="no">p2</span> <span class="kw">&lt;-</span> <span class="no">p</span> + <span class="fu">stat_summary</span>(
    <span class="fu">aes</span>(<span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="fu">stat</span>(<span class="no">y</span>))),
    <span class="kw">fun</span> <span class="kw">=</span> <span class="st">"mean"</span>,
    <span class="kw">geom</span> <span class="kw">=</span> <span class="st">"text_repel"</span>,
    <span class="kw">min.segment.length</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="co"># always draw segments</span>
    <span class="kw">position</span> <span class="kw">=</span> <span class="fu"><a href="../reference/position_nudge_repel.html">position_nudge_repel</a></span>(<span class="kw">y</span> <span class="kw">=</span> -<span class="fl">2</span>)
  ) +
  <span class="fu">labs</span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"position_nudge_repel()"</span>)

<span class="kw pkg">gridExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span>(<span class="no">p1</span>, <span class="no">p2</span>, <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">2</span>)</pre></body></html></div>
<p><img src="examples_files/figure-html/stat_summary-1.png" width="700"></p>
</div>
<div id="justify-multiple-lines-of-text-with-hjust" class="section level3">
<h3 class="hasAnchor">
<a href="#justify-multiple-lines-of-text-with-hjust" class="anchor"></a>Justify multiple lines of text with hjust</h3>
<p>The <code>hjust</code> option should behave mostly the same way it does with <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">ggplot2::geom_text()</a></code>.</p>
<div class="sourceCode" id="cb29"><html><body><pre class="r"><span class="no">p</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>() +
  <span class="fu">coord_cartesian</span>(<span class="kw">xlim</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,<span class="fl">1</span>), <span class="kw">ylim</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,<span class="fl">1</span>)) +
  <span class="fu">theme_void</span>()

<span class="no">labelInfo</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
  <span class="kw">x</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.45</span>, <span class="fl">0.55</span>),
  <span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>),
  <span class="kw">g</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(
    <span class="st">"I'd like very much to be\nright justified."</span>,
    <span class="st">"And I'd like to be\nleft justified."</span>
  )
)

<span class="no">p</span> + <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
  <span class="kw">data</span>          <span class="kw">=</span> <span class="no">labelInfo</span>,
  <span class="kw">mapping</span>       <span class="kw">=</span> <span class="fu">aes</span>(<span class="no">x</span>, <span class="no">y</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">g</span>),
  <span class="kw">size</span>          <span class="kw">=</span> <span class="fl">5</span>,
  <span class="kw">hjust</span>         <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">0</span>),
  <span class="kw">nudge_x</span>       <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">0.05</span>, <span class="fl">0.05</span>),
  <span class="kw">arrow</span>         <span class="kw">=</span> <span class="fu">arrow</span>(<span class="kw">length</span> <span class="kw">=</span> <span class="fu">unit</span>(<span class="fl">2</span>, <span class="st">"mm"</span>), <span class="kw">ends</span> <span class="kw">=</span> <span class="st">"last"</span>, <span class="kw">type</span> <span class="kw">=</span> <span class="st">"closed"</span>)
)</pre></body></html></div>
<p><img src="examples_files/figure-html/geom_text_repel-hjust-1.png" width="700"></p>
<div class="sourceCode" id="cb30"><html><body><pre class="r"><span class="no">p</span> + <span class="fu"><a href="../reference/geom_text_repel.html">geom_label_repel</a></span>(
  <span class="kw">data</span>          <span class="kw">=</span> <span class="no">labelInfo</span>,
  <span class="kw">mapping</span>       <span class="kw">=</span> <span class="fu">aes</span>(<span class="no">x</span>, <span class="no">y</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">g</span>),
  <span class="kw">size</span>          <span class="kw">=</span> <span class="fl">5</span>,
  <span class="kw">hjust</span>         <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">0</span>),
  <span class="kw">nudge_x</span>       <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">0.05</span>, <span class="fl">0.05</span>),
  <span class="kw">arrow</span>         <span class="kw">=</span> <span class="fu">arrow</span>(<span class="kw">length</span> <span class="kw">=</span> <span class="fu">unit</span>(<span class="fl">2</span>, <span class="st">"mm"</span>), <span class="kw">ends</span> <span class="kw">=</span> <span class="st">"last"</span>, <span class="kw">type</span> <span class="kw">=</span> <span class="st">"closed"</span>)
)</pre></body></html></div>
<p><img src="examples_files/figure-html/geom_text_repel-hjust-2.png" width="700"></p>
</div>
<div id="label-jittered-points" class="section level3">
<h3 class="hasAnchor">
<a href="#label-jittered-points" class="anchor"></a>Label jittered points</h3>
<div class="alert alert-warning" role="alert">
<p><strong>Warning:</strong> This example will not work with ggplot2 version 2.2.1 or older.</p>
</div>
<p>To get the latest development version of ggplot2, try:</p>
<div class="sourceCode" id="cb31"><html><body><pre class="r"><span class="co"># install.packages("devtools")</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"tidyverse/ggplot2"</span>)</pre></body></html></div>
<p>If your ggplot2 is newer than 2.2.1, try this example:</p>
<div class="sourceCode" id="cb32"><html><body><pre class="r"><span class="no">mtcars</span>$<span class="no">label</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">mtcars</span>)
<span class="no">mtcars</span>$<span class="no">label</span>[<span class="no">mtcars</span>$<span class="no">cyl</span> <span class="kw">!=</span> <span class="fl">6</span>] <span class="kw">&lt;-</span> <span class="st">""</span>

<span class="co"># New! (not available in ggplot2 version 2.2.1 or earlier)</span>
<span class="no">pos</span> <span class="kw">&lt;-</span> <span class="fu">position_jitter</span>(<span class="kw">width</span> <span class="kw">=</span> <span class="fl">0.3</span>, <span class="kw">seed</span> <span class="kw">=</span> <span class="fl">2</span>)

<span class="fu">ggplot</span>(<span class="no">mtcars</span>, <span class="fu">aes</span>(<span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">cyl</span>), <span class="no">mpg</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">label</span> <span class="kw">!=</span> <span class="st">""</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">label</span>)) +
  <span class="fu">geom_point</span>(<span class="kw">position</span> <span class="kw">=</span> <span class="no">pos</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(<span class="kw">position</span> <span class="kw">=</span> <span class="no">pos</span>) +
  <span class="fu">theme</span>(<span class="kw">legend.position</span> <span class="kw">=</span> <span class="st">"none"</span>) +
  <span class="fu">labs</span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"position_jitter()"</span>)</pre></body></html></div>
<p><img src="examples_files/figure-html/jitter-1.png" width="700"></p>
<p>You can also use other position functions, like <code><a href="https://rdrr.io/pkg/ggbeeswarm/man/position_quasirandom.html">position_quasirandom()</a></code> from the <a href="https://github.com/eclarke/ggbeeswarm">ggbeeswarm</a> package by <a href="https://github.com/eclarke">Erik Clarke</a>:</p>
<div class="sourceCode" id="cb33"><html><body><pre class="r"><span class="no">mtcars</span>$<span class="no">label</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">mtcars</span>)
<span class="no">mtcars</span>$<span class="no">label</span>[<span class="no">mtcars</span>$<span class="no">cyl</span> <span class="kw">!=</span> <span class="fl">6</span>] <span class="kw">&lt;-</span> <span class="st">""</span>

<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggbeeswarm</span>)
<span class="no">pos</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggbeeswarm/man/position_quasirandom.html">position_quasirandom</a></span>()

<span class="fu">ggplot</span>(<span class="no">mtcars</span>, <span class="fu">aes</span>(<span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">cyl</span>), <span class="no">mpg</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">label</span> <span class="kw">!=</span> <span class="st">""</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">label</span>)) +
  <span class="fu">geom_point</span>(<span class="kw">position</span> <span class="kw">=</span> <span class="no">pos</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(<span class="kw">position</span> <span class="kw">=</span> <span class="no">pos</span>) +
  <span class="fu">theme</span>(<span class="kw">legend.position</span> <span class="kw">=</span> <span class="st">"none"</span>) +
  <span class="fu">labs</span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"position_quasirandom()"</span>)</pre></body></html></div>
<p><img src="examples_files/figure-html/quasirandom-1.png" width="700"></p>
</div>
<div id="shadows-or-glow-under-text-labels" class="section level3">
<h3 class="hasAnchor">
<a href="#shadows-or-glow-under-text-labels" class="anchor"></a>Shadows (or glow) under text labels</h3>
<p>We can place shadows (or glow) underneath each text label to enhance the readability of the text. This might be useful when text labels are placed on top of other plot elements. This feature uses the same code as the <a href="https://github.com/GuangchuangYu/shadowtext">shadowtext</a> package by <a href="https://github.com/GuangchuangYu">Guangchuang Yu</a>.</p>
<div class="sourceCode" id="cb34"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)
<span class="fu">ggplot</span>(<span class="no">dat</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>)) +
  <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="kw">color</span> <span class="kw">=</span> <span class="st">"white"</span>,     <span class="co"># text color</span>
    <span class="kw">bg.color</span> <span class="kw">=</span> <span class="st">"grey30"</span>, <span class="co"># shadow color</span>
    <span class="kw">bg.r</span> <span class="kw">=</span> <span class="fl">0.15</span>          <span class="co"># shadow radius</span>
  )</pre></body></html></div>
<p><img src="examples_files/figure-html/shadowtext-1.png" width="700"></p>
</div>
<div id="verbose-timing-information" class="section level3">
<h3 class="hasAnchor">
<a href="#verbose-timing-information" class="anchor"></a>Verbose timing information</h3>
<p>Use <code>verbose = TRUE</code> to see:</p>
<ul>
<li>how many iterations of the physical simulation were completed</li>
<li>how much time has elapsed, in seconds</li>
<li>how many overlaps remain unresolved in the final figure</li>
</ul>
<div class="sourceCode" id="cb35"><html><body><pre class="r"><span class="no">p</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">mtcars</span>,
  <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">mtcars</span>), <span class="kw">colour</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">cyl</span>))) +
  <span class="fu">geom_point</span>()

<span class="no">p</span> + <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
  <span class="kw">verbose</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
  <span class="kw">seed</span> <span class="kw">=</span> <span class="fl">123</span>,
  <span class="kw">max.time</span> <span class="kw">=</span> <span class="fl">1</span>,
  <span class="kw">max.iter</span> <span class="kw">=</span> <span class="fl">Inf</span>,
  <span class="kw">size</span> <span class="kw">=</span> <span class="fl">3</span>
)</pre></body></html></div>
<p><img src="examples_files/figure-html/timing-1.png" width="700"></p>
<pre><code>## 1.00s elapsed for 101010 iterations, 2 overlaps. Consider increasing 'max.time'.</code></pre>
</div>
<div id="word-cloud" class="section level3">
<h3 class="hasAnchor">
<a href="#word-cloud" class="anchor"></a>Word cloud</h3>
<div class="alert alert-info" role="alert">
<p><strong>Note:</strong> The <strong><a href="https://github.com/lepennec/ggwordcloud">ggwordcloud</a></strong> package by <a href="https://github.com/lepennec">Erwan Le Pennec</a> creates much better word clouds than ggrepel.</p>
</div>
<p>The <code>force</code> option controls the strength of repulsion.</p>
<p>The <code>force_pull</code> option controls the strength of the spring that pulls the text label toward its data point.</p>
<p>To make a word cloud, we can assign all of the text labels the same data point at the origin (0, 0) and set <code>force_pull = 0</code> to disable the springs.</p>
<div class="sourceCode" id="cb37"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)
<span class="fu">ggplot</span>(<span class="no">mtcars</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
    <span class="fu">aes</span>(
      <span class="kw">label</span>  <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">mtcars</span>),
      <span class="kw">size</span>   <span class="kw">=</span> <span class="no">mpg</span> <span class="kw">&gt;</span> <span class="fl">15</span>,
      <span class="kw">colour</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">cyl</span>),
      <span class="kw">x</span>      <span class="kw">=</span> <span class="fl">0</span>,
      <span class="kw">y</span>      <span class="kw">=</span> <span class="fl">0</span>
    ),
    <span class="kw">force_pull</span>    <span class="kw">=</span> <span class="fl">0</span>, <span class="co"># do not pull text toward the point at (0,0)</span>
    <span class="kw">max.time</span>      <span class="kw">=</span> <span class="fl">0.5</span>,
    <span class="kw">max.iter</span>      <span class="kw">=</span> <span class="fl">1e5</span>,
    <span class="kw">max.overlaps</span>  <span class="kw">=</span> <span class="fl">Inf</span>,
    <span class="kw">segment.color</span> <span class="kw">=</span> <span class="fl">NA</span>,
    <span class="kw">point.padding</span> <span class="kw">=</span> <span class="fl">NA</span>
  ) +
  <span class="fu">theme_void</span>() +
  <span class="fu">theme</span>(<span class="kw">strip.text</span> <span class="kw">=</span> <span class="fu">element_text</span>(<span class="kw">size</span> <span class="kw">=</span> <span class="fl">16</span>)) +
  <span class="fu">facet_wrap</span>(~ <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">cyl</span>)) +
  <span class="fu">scale_color_discrete</span>(<span class="kw">name</span> <span class="kw">=</span> <span class="st">"Cylinders"</span>) +
  <span class="fu">scale_size_manual</span>(<span class="kw">values</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>, <span class="fl">3</span>)) +
  <span class="fu">theme</span>(
    <span class="kw">strip.text</span>   <span class="kw">=</span> <span class="fu">element_blank</span>(),
    <span class="kw">panel.border</span> <span class="kw">=</span> <span class="fu">element_rect</span>(<span class="kw">size</span> <span class="kw">=</span> <span class="fl">0.2</span>, <span class="kw">fill</span> <span class="kw">=</span> <span class="fl">NA</span>)
  )</pre></body></html></div>
<p><img src="examples_files/figure-html/wordcloud-1.png" width="700"></p>
</div>
<div id="polar-coordinates" class="section level3">
<h3 class="hasAnchor">
<a href="#polar-coordinates" class="anchor"></a>Polar coordinates</h3>
<div class="sourceCode" id="cb38"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)

<span class="no">mtcars</span>$<span class="no">label</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">mtcars</span>)
<span class="no">mtcars</span>$<span class="no">label</span>[<span class="no">mtcars</span>$<span class="no">mpg</span> <span class="kw">&lt;</span> <span class="fl">25</span>] <span class="kw">&lt;-</span> <span class="st">""</span>

<span class="fu">ggplot</span>(<span class="no">mtcars</span>, <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">wt</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">mpg</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">cyl</span>), <span class="kw">label</span> <span class="kw">=</span> <span class="no">label</span>)) +
  <span class="fu">coord_polar</span>(<span class="kw">theta</span> <span class="kw">=</span> <span class="st">"x"</span>) +
  <span class="fu">geom_point</span>(<span class="kw">size</span> <span class="kw">=</span> <span class="fl">2</span>) +
  <span class="fu">scale_color_discrete</span>(<span class="kw">name</span> <span class="kw">=</span> <span class="st">"cyl"</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(<span class="kw">show.legend</span> <span class="kw">=</span> <span class="fl">FALSE</span>) + <span class="co"># Don't display "a" in the legend.</span>
  <span class="fu">theme_bw</span>(<span class="kw">base_size</span> <span class="kw">=</span> <span class="fl">18</span>)</pre></body></html></div>
<p><img src="examples_files/figure-html/polar-1.png" width="700"></p>
</div>
<div id="unicode-characters-japanese" class="section level3">
<h3 class="hasAnchor">
<a href="#unicode-characters-japanese" class="anchor"></a>Unicode characters (Japanese)</h3>
<div class="sourceCode" id="cb39"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggrepel</span>)

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)
<span class="no">dat</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
  <span class="kw">x</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="fl">32</span>),
  <span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="fl">32</span>),
  <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html">strsplit</a></span>(
    <span class="kw">x</span> <span class="kw">=</span> <span class="st">"原文篭毛與美篭母乳布久思毛與美夫君志持此岳尓菜採須兒家吉閑名思毛"</span>,
    <span class="kw">split</span> <span class="kw">=</span> <span class="st">""</span>
  )<span class="kw">[[</span><span class="fl">1</span>]]
)

<span class="co"># Make sure to choose a font that is installed on your system.</span>
<span class="no">my_font</span> <span class="kw">&lt;-</span> <span class="st">"HiraginoSans-W0"</span>

<span class="fu">ggplot</span>(<span class="no">dat</span>, <span class="fu">aes</span>(<span class="no">x</span>, <span class="no">y</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">label</span>)) +
  <span class="fu">geom_point</span>(<span class="kw">size</span> <span class="kw">=</span> <span class="fl">2</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>) +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(<span class="kw">size</span> <span class="kw">=</span> <span class="fl">8</span>, <span class="kw">family</span> <span class="kw">=</span> <span class="no">my_font</span>) +
  <span class="fu">ggtitle</span>(<span class="st">"テスト"</span>) +
  <span class="fu">theme_bw</span>(<span class="kw">base_size</span> <span class="kw">=</span> <span class="fl">18</span>, <span class="kw">base_family</span> <span class="kw">=</span> <span class="no">my_font</span>)</pre></body></html></div>
<p><img src="examples_files/figure-html/japanese-1.png" width="700"></p>
</div>
<div id="mathematical-expressions" class="section level3">
<h3 class="hasAnchor">
<a href="#mathematical-expressions" class="anchor"></a>Mathematical expressions</h3>
<div class="sourceCode" id="cb40"><html><body><pre class="r"><span class="no">d</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
  <span class="kw">x</span>    <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">1.75</span>, <span class="fl">1.25</span>),
  <span class="kw">y</span>    <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">2.65</span>, <span class="fl">1.25</span>),
  <span class="kw">math</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(
    <span class="fl">NA</span>,
    <span class="st">"integral(f(x) * dx, a, b)"</span>,
    <span class="fl">NA</span>,
    <span class="st">"lim(f(x), x %-&gt;% 0)"</span>,
    <span class="fl">NA</span>
  )
)

<span class="fu">ggplot</span>(<span class="no">d</span>, <span class="fu">aes</span>(<span class="no">x</span>, <span class="no">y</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">math</span>)) +
  <span class="fu">geom_point</span>() +
  <span class="fu"><a href="../reference/geom_text_repel.html">geom_label_repel</a></span>(
    <span class="kw">parse</span>       <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="co"># Parse mathematical expressions.</span>
    <span class="kw">size</span>        <span class="kw">=</span> <span class="fl">6</span>,
    <span class="kw">box.padding</span> <span class="kw">=</span> <span class="fl">2</span>
  )</pre></body></html></div>
<p><img src="examples_files/figure-html/math-1.png" width="700"></p>
</div>
<div id="animation" class="section level3">
<h3 class="hasAnchor">
<a href="#animation" class="anchor"></a>Animation</h3>
<div class="sourceCode" id="cb41"><html><body><pre class="r"><span class="co"># This chunk of code will take a minute or two to run.</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggrepel</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">animation</span>)

<span class="no">plot_frame</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">n</span>) {
  <span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">42</span>)
  <span class="no">p</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">mtcars</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">mtcars</span>))) +
    <span class="fu"><a href="../reference/geom_text_repel.html">geom_text_repel</a></span>(
      <span class="kw">size</span> <span class="kw">=</span> <span class="fl">5</span>, <span class="kw">force</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">max.iter</span> <span class="kw">=</span> <span class="no">n</span>
    ) +
    <span class="fu">geom_point</span>(<span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>) +
    <span class="co"># theme_minimal(base_size = 16) +</span>
    <span class="fu">labs</span>(<span class="kw">title</span> <span class="kw">=</span> <span class="no">n</span>)
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">p</span>)
}

<span class="no">xs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">ceiling</a></span>(<span class="fl">1.18</span>^(<span class="fl">1</span>:<span class="fl">52</span>))
<span class="co"># xs &lt;- ceiling(1.4^(1:26))</span>
<span class="no">xs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">xs</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="no">xs</span>[<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">xs</span>)], <span class="fl">15</span>))
<span class="co"># plot(xs)</span>

<span class="fu"><a href="https://rdrr.io/pkg/animation/man/saveGIF.html">saveGIF</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="no">xs</span>, <span class="kw">function</span>(<span class="no">i</span>) {
    <span class="fu">plot_frame</span>(<span class="no">i</span>)
  }),
  <span class="kw">interval</span>   <span class="kw">=</span> <span class="fl">0.15</span>,
  <span class="kw">ani.width</span>  <span class="kw">=</span> <span class="fl">800</span>,
  <span class="kw">ani.heigth</span> <span class="kw">=</span> <span class="fl">600</span>,
  <span class="kw">movie.name</span> <span class="kw">=</span> <span class="st">"animated.gif"</span>
)</pre></body></html></div>
<p><a href="https://i.imgur.com/vv7uTwI.gifv">Click here</a> to see the animation.</p>
</div>
</div>
<div id="source-code" class="section level2">
<h2 class="hasAnchor">
<a href="#source-code" class="anchor"></a>Source code</h2>
<p>View the <a href="https://github.com/slowkow/ggrepel/blob/master/vignettes/examples.Rmd">source code for this vignette</a> on GitHub.</p>
</div>
<div id="r-session-info" class="section level2">
<h2 class="hasAnchor">
<a href="#r-session-info" class="anchor"></a>R Session Info</h2>
<div class="sourceCode" id="cb42"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo</a></span>()</pre></body></html></div>
<pre><code>## R version 4.0.3 (2020-10-10)
## Platform: x86_64-apple-darwin17.0 (64-bit)
## Running under: macOS Catalina 10.15.7
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] ggbeeswarm_0.6.0   ggrepel_0.9.1      ggplot2_3.3.2.9000 gridExtra_2.3     
## [5] knitr_1.30        
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_1.0.5.4        vipor_0.4.5         compiler_4.0.3     
##  [4] pillar_1.4.7        tools_4.0.3         digest_0.6.27      
##  [7] evaluate_0.14       memoise_1.1.0.9000  lifecycle_0.2.0    
## [10] tibble_3.0.4        gtable_0.3.0        pkgconfig_2.0.3    
## [13] rlang_0.4.9         rstudioapi_0.13     yaml_2.2.1         
## [16] beeswarm_0.2.3      pkgdown_1.5.1       xfun_0.19          
## [19] withr_2.3.0         stringr_1.4.0       dplyr_1.0.2        
## [22] desc_1.2.0          generics_0.1.0      fs_1.5.0           
## [25] vctrs_0.3.5         rprojroot_2.0.2     grid_4.0.3         
## [28] tidyselect_1.1.0    glue_1.4.2          R6_2.5.0           
## [31] rmarkdown_2.3.2     farver_2.0.3        purrr_0.3.4        
## [34] magrittr_2.0.1.9000 scales_1.1.1        htmltools_0.5.0    
## [37] ellipsis_0.3.1      MASS_7.3-53         assertthat_0.2.1   
## [40] colorspace_2.0-0    labeling_0.4.2      stringi_1.5.3      
## [43] munsell_0.5.0       crayon_1.3.4</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://slowkow.com">Kamil Slowikowski</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
